(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["components/sunui-upimg/sunui-upimg-qiniu"],{3104:function(e,t,n){"use strict";var i=function(){var e=this,t=e.$createElement;e._self._c},u=[];n.d(t,"a",function(){return i}),n.d(t,"b",function(){return u})},"50cc":function(e,t,n){},"67de":function(e,t,n){"use strict";var i=n("50cc"),u=n.n(i);u.a},"68c1":function(e,t,n){"use strict";n.r(t);var i=n("7335"),u=n.n(i);for(var r in i)"default"!==r&&function(e){n.d(t,e,function(){return i[e]})}(r);t["default"]=u.a},7335:function(e,t,n){"use strict";(function(e,i){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var u=r(n("a34a"));function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t,n,i,u,r,o){try{var a=e[r](o),c=a.value}catch(s){return void n(s)}a.done?t(c):Promise.resolve(c).then(i,u)}function a(e){return function(){var t=this,n=arguments;return new Promise(function(i,u){var r=e.apply(t,n);function a(e){o(r,i,u,a,c,"next",e)}function c(e){o(r,i,u,a,c,"throw",e)}a(void 0)})}}var c=n("3c2c"),s={data:function(){return{upload_after_list:[],upload_picture_list:[]}},name:"sunui-upimg",props:{upImgConfig:{type:Object}},created:function(){},methods:{initServerImage:function(e){this.upload_picture_list=e},chooseImage:function(e){_(this,parseInt(e),this.upImgConfig)},uploadimage:function(e){f(this,e)},deleteImg:function(e){d(e,this)},previewImg:function(e){m(e,this)},previewImgs:function(e){g(e,this)}}};t.default=s;var l=function(){var t=a(u.default.mark(function t(n,r,o,s){var l;return u.default.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return l={region:r.qiniuConfig.region,uptokenURL:r.qiniuConfig.uptokenURL,uptoken:r.qiniuConfig.uptoken,domain:r.qiniuConfig.domain,shouldUseQiniuFileName:r.qiniuConfig.shouldUseQiniuFileName||!1,fileHead:r.qiniuConfig.fileHead||"file",key:r.qiniuConfig.key||(new Date).getTime()},t.next=3,p(l);case 3:c.upload(o[s]["path"],function(){var t=a(u.default.mark(function t(r){return u.default.wrap(function(t){while(1)switch(t.prev=t.next){case 0:if("expired token"!=r.error){t.next=6;break}return e.showToast({title:"token未获取到,".concat(r.error),icon:"none"}),n.upload_picture_list=[],n.upload_after_list=[],console.warn(i("七牛云上传图片失败,错误信息:",r.error," at components\\sunui-upimg\\sunui-upimg-qiniu.vue:96")),t.abrupt("return");case 6:return o[s]["path_server"]="http://".concat(r.fileUrl),console.log(i("%c 七牛云上传(成功返回地址):http://".concat(r.fileUrl),"color:#1AAD19"," at components\\sunui-upimg\\sunui-upimg-qiniu.vue:100")),n.upload_picture_list=o,t.next=11,n.$emit("onUpImg",n.upload_picture_list);case 11:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}(),function(e){console.error(i("error: "+JSON.stringify(e)," at components\\sunui-upimg\\sunui-upimg-qiniu.vue:104"))},null,function(e){for(var t=0,i=n.upload_picture_list.length;t<i;t++)o[t]["upload_percent"]=e.progress;n.upload_picture_list=o});case 4:case"end":return t.stop()}},t,this)}));return function(e,n,i,u){return t.apply(this,arguments)}}(),p=function(){var e=a(u.default.mark(function e(t){var n,i;return u.default.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return n=(new Date).getTime(),i={region:t.region||"NCN",uptokenURL:t.uptokenURL||"https://[yourserver.com]/api/uptoken",uptoken:t.uptoken||"xxxx=",domain:t.domain||"http://[yourBucketId].bkt.clouddn.com",shouldUseQiniuFileName:t.shouldUseQiniuFileName||!1,fileHead:t.fileHead||"file",key:t.key||n},e.next=4,c.init(i);case 4:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),f=function(){var e=a(u.default.mark(function e(t,n){var i,r;return u.default.wrap(function(e){while(1)switch(e.prev=e.next){case 0:i=0,r=t.upload_picture_list.length;case 1:if(!(i<r)){e.next=8;break}if(0!=t.upload_picture_list[i]["upload_percent"]){e.next=5;break}return e.next=5,l(t,n,t.upload_picture_list,i);case 5:i++,e.next=1;break;case 8:case"end":return e.stop()}},e,this)}));return function(t,n){return e.apply(this,arguments)}}(),d=function(){var e=a(u.default.mark(function e(t,n){return u.default.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,n.$emit("onImgDel",{url:t.currentTarget.dataset.url,index:t.currentTarget.dataset.index});case 2:n.upload_picture_list.splice(t.currentTarget.dataset.index,1),n.upload_after_list.splice(t.currentTarget.dataset.index,1),n.upload_picture_list=n.upload_picture_list;case 5:case"end":return e.stop()}},e,this)}));return function(t,n){return e.apply(this,arguments)}}(),_=function(t,n,i){var r={qiniuConfig:{region:i.qiniuConfig.region,uptokenURL:i.qiniuConfig.uptokenURL,uptoken:i.qiniuConfig.uptoken,domain:i.qiniuConfig.domain,shouldUseQiniuFileName:i.qiniuConfig.shouldUseQiniuFileName,fileHead:"file",key:i.qiniuConfig.key||(new Date).getTime(),qiniu:i.qiniuConfig.qiniu},count:n,tips:i.tips||!1,notli:i.notli,sourceType:i.sourceType,sizeType:i.sizeType};e.chooseImage({count:r.notli?r.count=9:0==t.upload_after_list.length?r.count:r.count-t.upload_after_list.length,sizeType:""==r.sizeType||void 0==r.sizeType||1==r.sizeType?["compressed"]:["original"],sourceType:""==r.sourceType||void 0==r.sourceType?["album","camera"]:"camera"==r.sourceType?["camera"]:"album"==r.sourceType?["album"]:["album","camera"],success:function(){var e=a(u.default.mark(function e(n){var i,o;return u.default.wrap(function(e){while(1)switch(e.prev=e.next){case 0:for(i=0,o=n.tempFiles.length;i<o;i++)n.tempFiles[i]["upload_percent"]=0,n.tempFiles[i]["path_server"]="",t.upload_picture_list.push(n.tempFiles[i]),t.upload_picture_list.length>r.count&&(t.upload_picture_list=t.upload_picture_list.slice(0,r.count));return e.next=3,h(t,n,r);case 3:case"end":return e.stop()}},e,this)}));function n(t){return e.apply(this,arguments)}return n}()})},h=function(e,t,n){!n.notli&&n.count==e.upload_picture_list.length&&f(e,n),n.notli&&9==n.count&&f(e,n),e.upload_after_list=e.upload_after_list.concat(t.tempFilePaths).slice(0,n.count),e.upload_picture_list=e.upload_picture_list.slice(0,n.count)},m=function(t,n){e.previewImage({current:n.upload_after_list[t.currentTarget.dataset.index],urls:n.upload_after_list})},g=function(){var t=a(u.default.mark(function t(n,i){var r,o,a;return u.default.wrap(function(t){while(1)switch(t.prev=t.next){case 0:for(r=[],o=0,a=i.upload_picture_list.length;o<a;o++)r.push(i.upload_picture_list[o].path_server);e.previewImage({current:n.currentTarget.dataset.src,urls:r});case 3:case"end":return t.stop()}},t,this)}));return function(e,n){return t.apply(this,arguments)}}()}).call(this,n("6e42")["default"],n("0de9")["default"])},fe2d:function(e,t,n){"use strict";n.r(t);var i=n("3104"),u=n("68c1");for(var r in u)"default"!==r&&function(e){n.d(t,e,function(){return u[e]})}(r);n("67de");var o=n("2877"),a=Object(o["a"])(u["default"],i["a"],i["b"],!1,null,"6955fb34",null);t["default"]=a.exports}}]);
;(global["webpackJsonp"] = global["webpackJsonp"] || []).push([
    'components/sunui-upimg/sunui-upimg-qiniu-create-component',
    {
        'components/sunui-upimg/sunui-upimg-qiniu-create-component':(function(module, exports, __webpack_require__){
            __webpack_require__('6e42')['createComponent'](__webpack_require__("fe2d"))
        })
    },
    [['components/sunui-upimg/sunui-upimg-qiniu-create-component']]
]);                
